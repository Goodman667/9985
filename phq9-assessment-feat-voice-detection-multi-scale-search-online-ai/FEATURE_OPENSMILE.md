# OpenSMILE 语音分析功能使用说明

## 🎤 功能简介

本系统集成了专业的 **openSMILE** 音频特征提取工具，可以从您的语音中提取数十个声学特征，用于更准确地评估抑郁风险。

## 🔬 openSMILE 是什么？

openSMILE 是一个业界领先的开源音频特征提取工具，由德国 audEERING 公司开发，广泛应用于：
- 情感识别研究
- 心理健康评估
- 语音分析
- 抑郁症辅助诊断

## 📊 分析的声学特征

系统会从您的语音中提取以下关键特征：

### 1. 基频 (F0) - 音调特征
- **作用**: 检测说话时音调的变化范围
- **与抑郁的关系**: 抑郁症患者通常音调单调，变化范围较小
- **临床意义**: 反映情感表达的丰富程度

### 2. 响度 (Loudness) - 音量特征
- **作用**: 测量说话的音量大小
- **与抑郁的关系**: 抑郁症患者通常声音较小、缺乏能量
- **临床意义**: 反映精力和活力水平

### 3. Jitter - 音高微扰
- **作用**: 测量声音频率的不稳定性
- **与抑郁的关系**: 压力和情绪障碍会导致声音不稳定
- **临床意义**: 反映情绪紧张程度

### 4. Shimmer - 振幅微扰
- **作用**: 测量声音振幅的不稳定性
- **与抑郁的关系**: 反映发声质量的下降
- **临床意义**: 提示生理和心理状态

### 5. HNR (谐噪比)
- **作用**: 测量声音的清晰度
- **与抑郁的关系**: 抑郁症患者的 HNR 通常较低
- **临床意义**: 反映声音质量和情绪状态

### 6. MFCC (梅尔频率倒谱系数)
- **作用**: 全面描述声音的频谱特性
- **与抑郁的关系**: 综合反映语音的整体特征
- **临床意义**: 用于全面的情绪识别

## 🎯 如何使用

### 1. 录制语音

在填写完问卷后，点击"开始录音"按钮：
- 建议录制时间：**15-30秒**
- 可以朗读一段文字，或者描述您最近的感受
- 保持自然的说话方式，不需要刻意改变声音

### 2. 系统分析

提交后，系统会：
1. 将您的语音发送到后端
2. 使用 openSMILE 提取声学特征
3. 基于临床研究的算法计算抑郁风险
4. 生成详细的分析报告

### 3. 查看结果

结果页面会显示：
- ✨ **OpenSMILE 专业分析标识**（如果系统可用）
- **提取的特征数量**（通常为 88 个特征）
- **抑郁风险等级**：
  - 低风险
  - 轻度风险
  - 中度风险
  - 较高风险
  - 高风险
- **识别置信度**：95%（OpenSMILE）vs 70%（简单方法）

## ⚙️ 系统配置说明

### 对于系统管理员

系统支持两种模式：

#### 1. 专业模式（推荐）
- 需要安装 openSMILE
- 提供最准确的分析结果
- 置信度：95%

**启用方法**:
```properties
ai.opensmile.enabled=true
ai.opensmile.path=/usr/local/bin/SMILExtract
ai.opensmile.config.type=eGeMAPSv02
```

#### 2. 基础模式（默认）
- 无需额外安装
- 使用内置的简单特征提取
- 置信度：70%

**默认配置**:
```properties
ai.opensmile.enabled=false
```

### 配置选项

| 配置项 | 说明 | 推荐值 |
|--------|------|--------|
| ai.opensmile.enabled | 是否启用 openSMILE | true |
| ai.opensmile.path | SMILExtract 路径 | /usr/local/bin/SMILExtract |
| ai.opensmile.config.type | 配置类型 | eGeMAPSv02 |

### 可选配置类型

| 类型 | 特征数 | 速度 | 适用场景 |
|------|--------|------|---------|
| eGeMAPSv02 | 88 | 快 | 推荐，平衡性能和准确度 |
| GeMAPSv01b | 62 | 最快 | 快速筛查 |
| emobase | 988 | 中 | 研究用途 |
| ComParE_2016 | 6373 | 慢 | 竞赛级精度 |

## 🔒 隐私保护

- ✅ 所有语音处理在本地服务器完成
- ✅ 不会上传到第三方云服务
- ✅ 录音临时文件处理后立即删除
- ✅ 仅保存提取的特征值，不保存原始音频

## 📖 科学依据

该功能基于大量临床研究：

1. **Cummins et al. (2015)**: 语音分析在抑郁症评估中的应用综述
2. **Eyben et al. (2016)**: eGeMAPS 特征集用于情感计算
3. **Low et al. (2020)**: 使用语音特征检测抑郁症的元分析
4. **Aloshban et al. (2021)**: 声学特征在精神健康评估中的作用

研究表明，语音声学特征与抑郁症状存在显著相关性，准确率可达 **70-85%**。

## ❓ 常见问题

### Q1: 如果我不想录音怎么办？
A: 完全可以！语音分析是可选功能，不影响 PHQ-9 问卷的正常评估。

### Q2: 我的语音会被保存吗？
A: 不会。系统只保存提取的特征值（数字），不保存原始音频文件。

### Q3: 为什么我的结果没有显示"OpenSMILE 专业分析"？
A: 可能原因：
- 系统管理员未安装 openSMILE
- openSMILE 配置未启用
- 系统自动使用了备用的简单分析方法

### Q4: 录音质量会影响分析吗？
A: 会的。建议：
- 在安静的环境中录音
- 保持正常的音量
- 使用质量较好的麦克风
- 避免背景噪音

### Q5: 分析结果准确吗？
A: openSMILE 分析基于临床研究，但仅作为**辅助参考**，不能替代专业医疗诊断。

## ⚠️ 重要提示

1. 本功能仅供**参考和辅助**使用
2. 不能替代专业心理医生的诊断
3. 如有严重抑郁症状，请及时就医
4. 语音分析结果会结合问卷答案综合评估

## 🆘 需要帮助？

如果您有任何疑问或遇到问题：
- 查看完整的 [OpenSMILE 设置指南](OPENSMILE_SETUP.md)
- 联系系统管理员
- 访问 [openSMILE 官方文档](https://audeering.github.io/opensmile/)

---

**让科技助力心理健康！** 🧠💙
